<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Depth Test</title>
  <meta name="description" content="depth test">
  <meta name="author" content="Kepler Warrington-Arroyo">

  <link rel="stylesheet" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.2/p5.min.js"></script>

</head>

<body>
  <script type="text/javascript">

  var needPermissionsRequest = false;
  var permissions = true;

  function startup() {
    if (typeof DeviceMotionEvent.requestPermission === 'function' &&
        typeof DeviceOrientationEvent.requestPermission === 'function') {
          needPermissionsRequest = true;
          askButton = createButton('Begin');
          askButton.size(windowWidth*6/8, windowHeight/8);
          askButton.position(windowWidth/2 - drumButton.width/2, windowHeight/2);
          askButton.mousePressed(() => {
            DeviceMotionEvent.requestPermission()
            .then(response => {
              if (response != 'granted') {
                permissions = false;
              }
            }).catch(console.error);

            DeviceOrientationEvent.requestPermission()
            .then(response => {
              if (response != 'granted') {
                permissions = false;
              }
            }).catch(console.error);
          });
    }
  }
  //.catch(console.error)

  /*function onClick() {
    if (needPermissionsRequest && !permissions) {
      DeviceMotionEvent.requestPermission()
      .then(resM => {
        if (resM != 'granted') {
          permissions = false;
        }
      }).catch(console.error);

      DeviceOrientationEvent.requestPermission()
      .then(resO => {
        if (resO != 'granted') {
          permissions = false;
        }
      }).catch(console.error);
    }

    console.log("clicked\n");
  }*/

  </script>

  <!--<script type="text/javascript" src="code.js">
  </script>-->
</body>
</html>
